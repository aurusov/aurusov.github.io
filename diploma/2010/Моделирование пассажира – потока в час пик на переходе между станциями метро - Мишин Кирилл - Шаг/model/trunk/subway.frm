$Frame qqq
$Back_picture = <255 255 255> 800 600
Show
//! -------------------------------------------------------
//! --------- Карта метро
//! -------------------------------------------------------
	ellipse [ 150, 300, 30, 30, transparent, blue ]
	line [ 157, 303, 157, 150, red ]
	line [ 173, 303, 173, 150, red ]
	ellipse [ 150, 125, 30, 30, transparent, blue ]
	ellipse [ 170, 103, 30, 30, transparent, blue ]
	line [ 193, 106, 300, 70, red ]
	line [ 199, 122, 307, 86, red ]
	ellipse [ 299, 60, 30, 30, transparent, blue ]
	text[180, 315, 100, 20, transparent, black, = Константа_1]
	text[180, 140, 100, 20, transparent, black, = Константа_2]
	text[65, 90, 100, 20, transparent, black, = Константа_3]
	text[330, 50, 70, 20, transparent, black, = Константа_4]

//! -------------------------------------------------------
//! --------- Переход
//! -------------------------------------------------------
	text[5, 20, 35, 20, transparent, black, < Очередь.Длинна]
	rect[40, 20, 20, Очередь.Длинна * 1, green]

//! -------------------------------------------------------
//! --------- Чертановская
//! -------------------------------------------------------
Show_if Чертановская.Состояние == ЕстьПоезд
	rect[ 160, 310, 10, 10, green, blue ]

//! -------------------------------------------------------
//! --------- Перегон Чертановская-Серпуховская
//! -------------------------------------------------------
Show
	text[200, 200, 250, 20, transparent, black, 'Количество поездов в перегоне ЧС:']
//text[200, 200, 100, 20, transparent, black, Select(Поезда: Поезда.Состояние == В_пути and Поезда.Маршрут == Чертановская).size()]
	text[200, 220, 250, 20, transparent, red, = ЧС.Количество_поездов]

Show
	text[200, 240, 350, 20, transparent, black, 'Количество людей на переходе :']
	text[200, 260, 250, 20, transparent, red, = Очередь.Длинна]

Show_if ЧС.Количество_поездов == 1
	rect[ 160, 280, 10, 10, green, blue ]

Show_if ЧС.Количество_поездов == 2
	rect[ 160, 260, 10, 10, green, blue ]
	rect[ 160, 280, 10, 10, green, blue ]

Show_if ЧС.Количество_поездов == 3
	rect[ 160, 240, 10, 10, green, blue ]
	rect[ 160, 260, 10, 10, green, blue ]
	rect[ 160, 280, 10, 10, green, blue ]

Show_if ЧС.Количество_поездов == 4
	rect[ 160, 240, 10, 10, green, blue ]
	rect[ 160, 260, 10, 10, green, blue ]
	rect[ 160, 280, 10, 10, green, blue ]
	rect[ 160, 220, 10, 10, green, blue ]
	
Show_if ЧС.Количество_поездов == 5
	rect[ 160, 240, 10, 10, green, blue ]
	rect[ 160, 260, 10, 10, green, blue ]
	rect[ 160, 280, 10, 10, green, blue ]
	rect[ 160, 220, 10, 10, green, blue ]
	rect[ 160, 200, 10, 10, green, blue ]
	
Show_if ЧС.Количество_поездов == 6
	rect[ 160, 240, 10, 10, green, blue ]
	rect[ 160, 260, 10, 10, green, blue ]
	rect[ 160, 280, 10, 10, green, blue ]
	rect[ 160, 220, 10, 10, green, blue ]
	rect[ 160, 200, 10, 10, green, blue ]
	rect[ 160, 180, 10, 10, green, blue ]
	
Show_if ЧС.Количество_поездов >= 7
	rect[ 160, 240, 10, 10, green, blue ]
	rect[ 160, 260, 10, 10, green, blue ]
	rect[ 160, 280, 10, 10, green, blue ]
	rect[ 160, 220, 10, 10, green, blue ]
	rect[ 160, 200, 10, 10, green, blue ]
	rect[ 160, 180, 10, 10, green, blue ]
	rect[ 160, 160, 10, 10, green, blue ]

//! -------------------------------------------------------
//! --------- Добрынинская
//! -------------------------------------------------------
Show_if Добрынинская.Состояние == ЕстьПоезд
	rect[ 180, 113, 10, 10, green, blue ]

//! -------------------------------------------------------
//! --------- Перегон Добрынинская-Курская
//! -------------------------------------------------------
Show
	text[480, 200, 250, 20, transparent, black, 'Количество поездов в перегоне ДК:']
	text[480, 220, 250, 20, transparent, red, = ДК.Количество_поездов]

Show_if ДК.Количество_поездов == 1
	rect[ 205, 105, 10, 10, green, blue ]

Show_if ДК.Количество_поездов == 2
	rect[ 205, 105, 10, 10, green, blue ]
	rect[ 230, 97, 10, 10, green, blue ]

Show_if ДК.Количество_поездов == 3
	rect[ 205, 105, 10, 10, green, blue ]
	rect[ 230, 97, 10, 10, green, blue ]
	rect[ 255, 88, 10, 10, green, blue ]

Show_if ДК.Количество_поездов >= 4
	rect[ 205, 105, 10, 10, green, blue ]
	rect[ 230, 97, 10, 10, green, blue ]
	rect[ 255, 88, 10, 10, green, blue ]
	rect[ 280, 80, 10, 10, green, blue ]

$End
